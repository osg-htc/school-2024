
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://osg-htc.org/school-2024/materials/scaling/part1-ex2-job-attributes/">
      
      <link rel="icon" href="../../../assets/OSG_Logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.0">
    
    
      
        <title>Exercise 1.2: Investigating Job Attributes - OSG School 2024</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.33e2939f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/code-highlight.css">
    
      <link rel="stylesheet" href="../../../stylesheets/osg.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#exercise-12-investigating-job-attributes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG School 2024" class="md-header__button md-logo" aria-label="OSG School 2024" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG School 2024
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exercise 1.2: Investigating Job Attributes
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG School 2024" class="md-nav__button md-logo" aria-label="OSG School 2024" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    OSG School 2024
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../schedule/" class="md-nav__link">
        Schedule
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Logistics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Logistics" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Logistics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/" class="md-nav__link">
        General information
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        Travel
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Travel" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Travel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/travel-planning/" class="md-nav__link">
        Travel planning
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/visas/" class="md-nav__link">
        Visa requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/hotel/" class="md-nav__link">
        Hotel information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/account-setup/" class="md-nav__link">
        Account setup
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#preparing-exercise-files" class="md-nav__link">
    Preparing exercise files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploring-ospool-job-class-ad-attributes" class="md-nav__link">
    Exploring OSPool job class ad attributes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="exercise-12-investigating-job-attributes">Exercise 1.2: Investigating Job Attributes<a class="headerlink" href="#exercise-12-investigating-job-attributes" title="Permanent link">&para;</a></h1>
<p>The objective of this exercise is to your awareness of job "class ad attributes",
especially ones that may help you look for issues with your jobs in the OSPool.</p>
<p>Recall that a job class ad contains attributes and their values that describe what HTCondor knows about the job.
OSPool jobs contain extra attributes that are specific to that pool.
Thus, an OSPool job class ad may have well over 150 attributes.</p>
<p>Some OSPool job attributes are especially helpful when you are scaling up jobs
and want to see if jobs are running as expected or are maybe doing surprising things that are worth extra attention.</p>
<h2 id="preparing-exercise-files">Preparing exercise files<a class="headerlink" href="#preparing-exercise-files" title="Permanent link">&para;</a></h2>
<p>Because this exercise focuses on OSPool job attributes, please use your OSPool account on <code>ap40.uw.osg-htc.org</code>. </p>
<ol>
<li>
<p>Create a shell script for testing called <code>simple.sh</code>:</p>
<div class="codehilite"><pre><span></span><code>#!/bin/bash

SLEEPTIME=$1

hostname
pwd
whoami

for i in {1..5}
do 
 echo &quot;performing iteration $i&quot;
 sleep $SLEEPTIME
done
</code></pre></div>

</li>
<li>
<p>Create an HTCondor submit file that queues three jobs:</p>
<div class="codehilite"><pre><span></span><code>universe = vanilla
log = logs/$(Cluster)_$(Process).log
error = logs/$(Cluster)_$(Process).err
output = $(Cluster)_$(Process).out

executable = simple.sh

should_transfer_files = YES
when_to_transfer_output = ON_EXIT

request_cpus = 1
request_memory = 1GB
request_disk = 1GB

# set arguments, queue a normal job
arguments = 600
queue 1

# queue a job that will go on hold
transfer_input_files = test.txt
queue 1

# queue a job that will never start
request_memory = 40TB
queue 1
</code></pre></div>

</li>
</ol>
<h2 id="exploring-ospool-job-class-ad-attributes">Exploring OSPool job class ad attributes<a class="headerlink" href="#exploring-ospool-job-class-ad-attributes" title="Permanent link">&para;</a></h2>
<p>For this exercise, you will submit the three jobs defined in the submit file above,
then examine their job class ad attributes.</p>
<p>Here are some attributes that may be interesting:</p>
<ul>
<li><code>CpusProvisioned</code> is the number of CPUs given to your job for the current or most recent run</li>
<li><code>ResidentSetSize_RAW</code> is the maximum amount of memory that HTCondor has noticed your job using (in KB)</li>
<li><code>DiskUsage_RAW</code> is the maximum amount of disk that HTCondor has noticed your job using (in MB)</li>
<li><code>NumJobStarts</code> is the number of times HTCondor has started your job; <code>1</code> is typical for a running job, and higher counts may indicate issues running the job</li>
<li><code>LastRemoteHost</code> identifies the name for the slot where your job is running or most recently ran</li>
<li><code>MachineAttrGLIDEIN_ResourceName*N*</code> is a set of numbered attributes that identify the most recent sites where your job ran; <em>N</em> is <code>0</code> for the most recent (or current) run, <code>1</code> for the previous run, and so on up to <code>9</code></li>
<li><code>ExitCode</code> exists only if your job exited (completed) at least once; a value of <code>0</code> typically means success</li>
<li><code>HoldReasonCode</code> exists only if your job went on hold; if so, it is a number corresponding to the main hold reason
    (see <a href="https://htcondor.readthedocs.io/en/latest/classad-attributes/job-classad-attributes.html?highlight=HoldReasonCode#job-classad-attributes">here</a> for details)</li>
<li><code>NumHoldsByReason</code> is a list of all of the main reasons your job has gone on hold so far with counts of each hold type</li>
</ul>
<p>Let&rsquo;s explore these attributes on real jobs.</p>
<ol>
<li>
<p>Submit the jobs (above) and note the cluster ID</p>
</li>
<li>
<p>When one job from the cluster is running, view all of its job class ad attributes:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>condor_q -l &lt;JobId&gt;
</code></pre></div>

<p>where <code>&lt;JobId&gt;</code> is your job's ID, and <code>-l</code> stands for <code>-long</code></p>
<p>This command lists all of the job&rsquo;s class ad attributes.
Details of some of the attributes are in the
<a href="https://htcondor.readthedocs.io/en/latest/classad-attributes/job-classad-attributes.html">HTcondor Manual</a>.
Others are defined (and not well documented) only for the OSPool.
Can you find any of the attributes listed above?</p>
</li>
<li>
<p>Next, use <code>condor_q -af &lt;AttributeName&gt;</code> to examine one attribute at a time for several jobs:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>condor_q -af NumJobStarts &lt;ClusterID&gt;
</code></pre></div>

<p>where <code>&lt;ClusterID&gt;</code> is the HTCondor cluster ID noted above, and <code>-af</code> stands for <code>-autoformat</code>.</p>
<p>What does the output tell you?</p>
</li>
<li>
<p>Finally, display several attributes at once for the jobs:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>condor_q -af:j NumJobStarts DiskUsage_RAW LastRemoteHost HoldReasonCode &lt;ClusterID&gt;
</code></pre></div>

<p>Why do some values appear as <code>undefined</code>?</p>
</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://twitter.com/OSGSchool" target="_blank" rel="noopener" title="OSG School on Twitter" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d892486b.min.js"></script>
      
    
  </body>
</html>