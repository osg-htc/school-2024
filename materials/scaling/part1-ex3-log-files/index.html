
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://osg-htc.org/school-2024/materials/scaling/part1-ex3-log-files/">
      
      <link rel="icon" href="../../../assets/OSG_Logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.0">
    
    
      
        <title>Part1 ex3 log files - OSG School 2024</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.33e2939f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/code-highlight.css">
    
      <link rel="stylesheet" href="../../../stylesheets/osg.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-job-information-from-log-files" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG School 2024" class="md-header__button md-logo" aria-label="OSG School 2024" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG School 2024
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part1 ex3 log files
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG School 2024" class="md-nav__button md-logo" aria-label="OSG School 2024" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    OSG School 2024
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../schedule/" class="md-nav__link">
        Schedule
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Logistics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Logistics" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Logistics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/" class="md-nav__link">
        General information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/hotel/" class="md-nav__link">
        Hotel information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/location/" class="md-nav__link">
        School location
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/local-transportation/" class="md-nav__link">
        Local transportation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/visas/" class="md-nav__link">
        Visa requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/travel-planning/" class="md-nav__link">
        Travel planning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/meals/" class="md-nav__link">
        Meal information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/dining/" class="md-nav__link">
        Dining options
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/account-setup/" class="md-nav__link">
        Account setup
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#job-terminations" class="md-nav__link">
    Job terminations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-resource-usage" class="md-nav__link">
    Job resource usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-job-information" class="md-nav__link">
    Other job information
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <style type="text/css">
  pre em { font-style: normal; background-color: yellow; }
  pre strong { font-style: normal; font-weight: bold; color: \#008; }
</style>

<h1 id="getting-job-information-from-log-files">Getting Job Information from Log Files<a class="headerlink" href="#getting-job-information-from-log-files" title="Permanent link">&para;</a></h1>
<p>HTCondor job log files contain useful information about submitted, running, and/or completed jobs, but the format of that information may not always be useful <em>to you</em>. Here, we have a few examples of how to use some powerful Unix commands (<code>grep</code>, <code>sort</code>, <code>uniq</code>) to pull information out of these job log files. It is now time for you to try these on your own jobs!</p>
<p>Before starting this exercise, copy a couple of your job log files from previous exercises (for example, HTC Exercise 1.5 and/or OSG Exercise 1.1) in to a new directory for this exercise. Use these log files in place of <code>my-job.log</code> in the examples below.</p>
<p>The <code>grep</code> command displays lines from a file matching a given pattern, where the pattern is the first argument provided to <code>grep</code>. For example <code>grep 'alice' address_book.txt</code> would print out all lines containing the characters <code>alice</code> in the file named <code>address_book.txt</code>. While working through this exercise, consider keeping one of your job log files open in a separate window to see if you can figure out how we came up with the patterns presented in this exercise.</p>
<h2 id="job-terminations">Job terminations<a class="headerlink" href="#job-terminations" title="Permanent link">&para;</a></h2>
<p>Lines for job termination events in the job log always start with <code>005</code> and contain the timestamp of when the job(s) ended. Use the following <code>grep</code> command to get a list of when jobs ended in your log files:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>grep <span class="s1">&#39;^005&#39;</span> my-job.log
</code></pre></div>

<p><em>Optional challenge</em>: What is the importance of <code>^</code> in the pattern (<code>^005</code>) provided above?</p>
<p>Recall that executables typically exit with code <code>0</code> when they exit normally, which often (but not always!) means that they exited successfully. Lines containing jobs' exit codes (i.e. return values) all contain the word <code>termination</code>. Use <code>grep</code> to get a list of jobs' exit codes:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>grep termination my-job.log
</code></pre></div>

<p>By "piping" the output of the previous command through the <code>sort</code> and then <code>uniq</code> commands, we can get a count of each exit code:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>grep termination my-job.log <span class="p">|</span> sort <span class="p">|</span> uniq -c
</code></pre></div>

<p>Here's an example of the output from the previous commands when run on a log file written to from eight jobs. Six jobs exited with exit code <code>0</code>, while two exited <code>1</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">[username@ap40]$ </span>grep <span class="s1">&#39;^005&#39;</span> my-job.log
<span class="go">005 (236881.000.000) 2022-07-27 15:07:38 Job terminated.</span>
<span class="go">005 (236883.000.000) 2022-07-27 15:07:42 Job terminated.</span>
<span class="go">005 (236882.000.000) 2022-07-27 15:08:01 Job terminated.</span>
<span class="go">005 (236880.000.000) 2022-07-27 15:08:07 Job terminated.</span>
<span class="go">005 (236891.000.000) 2022-07-27 15:13:31 Job terminated.</span>
<span class="go">005 (236893.000.000) 2022-07-27 15:13:32 Job terminated.</span>
<span class="go">005 (236892.000.000) 2022-07-27 15:13:58 Job terminated.</span>
<span class="go">005 (236890.000.000) 2022-07-27 15:13:59 Job terminated.</span>

<span class="gp">[username@ap40]$ </span>grep <span class="s1">&#39;termination&#39;</span> my-job.log
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 0)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 1)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 0)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 0)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 1)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 0)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 0)</span>
<span class="gp gp-VirtualEnv">(1)</span> <span class="go">Normal termination (return value 0)</span>

<span class="gp">[username@ap40]$ </span>grep <span class="s1">&#39;termination&#39;</span> my-job.log <span class="p">|</span> sort <span class="p">|</span> uniq -c
<span class="go">6   (1) Normal termination (return value 0)</span>
<span class="go">2   (1) Normal termination (return value 1)</span>
</code></pre></div>

<h2 id="job-resource-usage">Job resource usage<a class="headerlink" href="#job-resource-usage" title="Permanent link">&para;</a></h2>
<p>Jobs' resource usages (and requests and allocations) are logged in the following format:</p>
<div class="codehilite"><pre><span></span><code>Partitionable Resources :    Usage  Request Allocated
    Cpus                 :                 1         1
    Disk (KB)            :    10382  1048576   1468671
    Memory (MB)          :      692     1024      1024
</code></pre></div>

<p>Run the following <code>grep</code> command to pull out the memory information from your job logs:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>grep <span class="s1">&#39;Memory (MB) *:&#39;</span> my-job.log
</code></pre></div>

<p>Look back at the format in the example above. Columns after the <code>:</code> will first show memory usage, then memory requested, and then the memory allocated to your job.</p>
<p>Similarly, use the following command to get the disk information from your job logs:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">$ </span>grep <span class="s1">&#39;Disk (KB) *:&#39;</span> my-job.log
</code></pre></div>

<p>Here's some example output from running the memory <code>grep</code> command on the same eight-job log file:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">[username@ap40]$ </span>grep <span class="s1">&#39;Memory (MB) *:&#39;</span> my-job.log
<span class="go">Memory (MB)          :      692     1024      1024 </span>
<span class="go">Memory (MB)          :      714     1024      1024 </span>
<span class="go">Memory (MB)          :      703     1024      1024 </span>
<span class="go">Memory (MB)          :      699     1024      1024 </span>
<span class="go">Memory (MB)          :      705     1024      1024 </span>
<span class="go">Memory (MB)          :      704     1024      1024 </span>
<span class="go">Memory (MB)          :      711     1024      1024 </span>
<span class="go">Memory (MB)          :      697     1024      1024 </span>
</code></pre></div>

<p>In this example, the memory usage for the jobs ranged from 692 to 714 MB, and they all requested (and were allocated) 1 GB of memory.</p>
<h2 id="other-job-information">Other job information<a class="headerlink" href="#other-job-information" title="Permanent link">&para;</a></h2>
<p>See if you can come up with <code>grep</code> commands to gather the number of bytes sent and received by jobs (i.e. how much data was transferred to/from the access point). Here is some example output for comparison:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">[username@ap40]$ </span>grep <span class="s1">&#39;&lt;PATTERN REMOVED&gt;&#39;</span> my-job.log
<span class="go">760393  -  Total Bytes Sent By Job</span>
<span class="go">760395  -  Total Bytes Sent By Job</span>
<span class="go">760397  -  Total Bytes Sent By Job</span>
<span class="go">760395  -  Total Bytes Sent By Job</span>
<span class="go">760393  -  Total Bytes Sent By Job</span>
<span class="go">760395  -  Total Bytes Sent By Job</span>
<span class="go">760397  -  Total Bytes Sent By Job</span>
<span class="go">760395  -  Total Bytes Sent By Job</span>

<span class="gp">[username@ap40]$ </span>grep <span class="s1">&#39;&lt;PATTERN REMOVED&gt;&#39;</span> my-job.log
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
<span class="go">19240  -  Total Bytes Received By Job</span>
</code></pre></div>

<p>Job log files may also contain additional information about held jobs or interrupted jobs. If you feel that your jobs are bouncing from idle to running and back to idle, or that they are otherwise not making as much progress as you expect, the log files are a good place to check. Though they might eventually become impossibly large to read line-by-line once you start scaling up, using <code>grep</code> to pull out specific lines and using <code>sort</code> and <code>uniq</code> to reduce the output can help you make sense of the information contained in the logs.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://twitter.com/OSGSchool" target="_blank" rel="noopener" title="OSG School on Twitter" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d892486b.min.js"></script>
      
    
  </body>
</html>