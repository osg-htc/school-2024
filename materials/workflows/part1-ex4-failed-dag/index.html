
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://osg-htc.org/school-2024/materials/workflows/part1-ex4-failed-dag/">
      
      <link rel="icon" href="../../../assets/OSG_Logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.0">
    
    
      
        <title>1.4 - Handling jobs that fail with DAGMan - OSG School 2024</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.33e2939f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ef6f36e2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../stylesheets/code-highlight.css">
    
      <link rel="stylesheet" href="../../../stylesheets/osg.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#workflows-exercise-14-handling-a-dag-that-fails" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="OSG School 2024" class="md-header__button md-logo" aria-label="OSG School 2024" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OSG School 2024
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1.4 - Handling jobs that fail with DAGMan
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="OSG School 2024" class="md-nav__button md-logo" aria-label="OSG School 2024" data-md-component="logo">
      
  <img src="../../../assets/OSG_Logo.svg" alt="logo">

    </a>
    OSG School 2024
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../schedule/" class="md-nav__link">
        Schedule
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../health/" class="md-nav__link">
        Health Guidelines
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Logistics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Logistics" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Logistics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/" class="md-nav__link">
        General information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/travel-advice/" class="md-nav__link">
        Travel advice
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/hotel/" class="md-nav__link">
        Hotel information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/location/" class="md-nav__link">
        School location
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/local-transportation/" class="md-nav__link">
        Local transportation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/visas/" class="md-nav__link">
        Visa requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/travel-planning/" class="md-nav__link">
        Travel planning
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/meals/" class="md-nav__link">
        Meal information
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/dining/" class="md-nav__link">
        Dining options
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/fun-day/" class="md-nav__link">
        Madison Fun Day
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../logistics/account-setup/" class="md-nav__link">
        Account setup
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Materials
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Materials" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Materials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        Intro to HTCondor
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Intro to HTCondor" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Intro to HTCondor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_1" type="checkbox" id="__nav_5_2_1" >
      
      <label class="md-nav__link" for="__nav_5_2_1">
        Intro Exercises 1 - Running and Viewing Simple Jobs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Intro Exercises 1 - Running and Viewing Simple Jobs" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_1">
          <span class="md-nav__icon md-icon"></span>
          Intro Exercises 1 - Running and Viewing Simple Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex1-login/" class="md-nav__link">
        1.1 - Log in and look around
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex2-commands/" class="md-nav__link">
        1.2 - Experiment with HTCondor commands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex3-jobs/" class="md-nav__link">
        1.3 - Run jobs!
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex4-logs/" class="md-nav__link">
        1.4 - Read and interpret log files
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex5-request/" class="md-nav__link">
        1.5 - Determining resource needs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex6-remove/" class="md-nav__link">
        1.6 - Remove jobs from the queue
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_2" type="checkbox" id="__nav_5_2_2" >
      
      <label class="md-nav__link" for="__nav_5_2_2">
        Bonus Exercises - Job Attributes and Handling
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Bonus Exercises - Job Attributes and Handling" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_2">
          <span class="md-nav__icon md-icon"></span>
          Bonus Exercises - Job Attributes and Handling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex7-compile/" class="md-nav__link">
        Bonus Exercise 1.7 - Compile and run some C code
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex8-queue/" class="md-nav__link">
        Bonus Exercise 1.8 - Explore condor_q
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part1-ex9-status/" class="md-nav__link">
        Bonus Exercise 1.9- Explore condor_stataus
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2_3" type="checkbox" id="__nav_5_2_3" >
      
      <label class="md-nav__link" for="__nav_5_2_3">
        Intro Exercises 2 - Running Many HTC Jobs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Intro Exercises 2 - Running Many HTC Jobs" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_2_3">
          <span class="md-nav__icon md-icon"></span>
          Intro Exercises 2 - Running Many HTC Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part2-ex1-files/" class="md-nav__link">
        2.1 - Work with input and output files
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part2-ex2-queue-n/" class="md-nav__link">
        2.2 - Use queue N, $(Cluster), and $(Process)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part2-ex3-queue-from/" class="md-nav__link">
        2.3 - Use queue from with custom variables
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../htcondor/part2-ex4-queue-matching/" class="md-nav__link">
        Bonus Exercise 2.4 - Use queue matching with a custom variable
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      <label class="md-nav__link" for="__nav_5_3">
        OSG
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="OSG" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          OSG
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex1-login-scp/" class="md-nav__link">
        1.1 - Log in to the OSPool Access Point
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex2-submit-osg/" class="md-nav__link">
        1.2 - Running jobs in the OSPool
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex3-hardware-diffs/" class="md-nav__link">
        1.3 - Hardware differences between PATh and OSG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../osg/part1-ex4-software-diffs/" class="md-nav__link">
        1.4 - Software differences in OSPool
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      <label class="md-nav__link" for="__nav_5_4">
        Troubleshooting Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Troubleshooting Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Troubleshooting Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/part1-ex1-troubleshooting/" class="md-nav__link">
        1.1 - Troubleshooting Jobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/part1-ex2-job-retry/" class="md-nav__link">
        1.2 - Job Retry
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      <label class="md-nav__link" for="__nav_5_5">
        Software Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5_1" type="checkbox" id="__nav_5_5_1" >
      
      <label class="md-nav__link" for="__nav_5_5_1">
        Software Exercises 1 - Exploring Containers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises 1 - Exploring Containers" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_5_1">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises 1 - Exploring Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex1-run-apptainer/" class="md-nav__link">
        1.1 - Run and Explore Apptainer Containers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex2-apptainer-jobs/" class="md-nav__link">
        1.2 - Use Apptainer Containers in OSPool Jobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex3-docker-jobs/" class="md-nav__link">
        1.3 - Use Docker Containers in OSPool Jobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex4-apptainer-build/" class="md-nav__link">
        1.4 - Build, Test, and Deploy an Apptainer Container
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part1-ex5-pick-an-option/" class="md-nav__link">
        1.5 - Choose Software Options
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5_2" type="checkbox" id="__nav_5_5_2" >
      
      <label class="md-nav__link" for="__nav_5_5_2">
        Software Exercises 2 - Preparing Scripts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises 2 - Preparing Scripts" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_5_2">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises 2 - Preparing Scripts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part2-ex1-build-executable/" class="md-nav__link">
        2.1 - Build an HTC-Friendly Executable
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5_3" type="checkbox" id="__nav_5_5_3" >
      
      <label class="md-nav__link" for="__nav_5_5_3">
        Software Exercises 3 -  Container Examples (Optional)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises 3 -  Container Examples (Optional)" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_5_3">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises 3 -  Container Examples (Optional)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part3-ex1-apptainer-recipes/" class="md-nav__link">
        3.1 - Create an Apptainer Definition Files
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part3-ex2-docker-build/" class="md-nav__link">
        3.2 - Build Your Own Docker Container
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5_4" type="checkbox" id="__nav_5_5_4" >
      
      <label class="md-nav__link" for="__nav_5_5_4">
        Software Exercises 4 - Exploring Compiled Software (Optional)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises 4 - Exploring Compiled Software (Optional)" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_5_4">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises 4 - Exploring Compiled Software (Optional)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part4-ex1-download/" class="md-nav__link">
        4.1 - Download and Use Compiled Software
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part4-ex2-wrapper/" class="md-nav__link">
        4.2 - Use a Wrapper Script To Run Software
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part4-ex3-arguments/" class="md-nav__link">
        4.3 - Using Arguments With Wrapper Scripts
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5_5" type="checkbox" id="__nav_5_5_5" >
      
      <label class="md-nav__link" for="__nav_5_5_5">
        Software Exercises 5 - Compiled Software Examples (Optional)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Software Exercises 5 - Compiled Software Examples (Optional)" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_5_5">
          <span class="md-nav__icon md-icon"></span>
          Software Exercises 5 - Compiled Software Examples (Optional)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part5-ex1-prepackaged/" class="md-nav__link">
        5.1 - Compiling a Research Software
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part5-ex2-python/" class="md-nav__link">
        5.2 - Compiling Python and Running Jobs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part5-ex3-conda/" class="md-nav__link">
        5.3 - Using Conda Environments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../software/part5-ex4-compiling/" class="md-nav__link">
        5.4 - Compiling and Running a Simple Code
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6" type="checkbox" id="__nav_5_6" >
      
      <label class="md-nav__link" for="__nav_5_6">
        Data Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Data Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6_1" type="checkbox" id="__nav_5_6_1" >
      
      <label class="md-nav__link" for="__nav_5_6_1">
        Data Exercises 1 - HTCondor File Transfer
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Exercises 1 - HTCondor File Transfer" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_6_1">
          <span class="md-nav__icon md-icon"></span>
          Data Exercises 1 - HTCondor File Transfer
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part1-ex1-data-needs/" class="md-nav__link">
        1.1 - Understanding a job's data needs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part1-ex2-file-transfer/" class="md-nav__link">
        1.2 - transfer_input_files, transfer_output_files, and remaps
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part1-ex3-blast-split/" class="md-nav__link">
        1.3- Splitting input
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6_2" type="checkbox" id="__nav_5_6_2" >
      
      <label class="md-nav__link" for="__nav_5_6_2">
        Data Exercises 2 - Using OSDF
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Exercises 2 - Using OSDF" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_6_2">
          <span class="md-nav__icon md-icon"></span>
          Data Exercises 2 - Using OSDF
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part2-ex1-osdf-inputs/" class="md-nav__link">
        2.1 - OSDF for inputs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data/part2-ex2-osdf-outputs/" class="md-nav__link">
        2.2 - OSDF for outputs
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_7" type="checkbox" id="__nav_5_7" >
      
      <label class="md-nav__link" for="__nav_5_7">
        Scaling Up
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Scaling Up" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_7">
          <span class="md-nav__icon md-icon"></span>
          Scaling Up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scaling/part1-ex1-organization/" class="md-nav__link">
        1.1 - Organizing HTC workloads
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scaling/part1-ex2-job-attributes/" class="md-nav__link">
        1.2 - Investigating Job Attributes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../scaling/part1-ex3-log-files/" class="md-nav__link">
        1.3 - Getting Job Information from Log Files
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8" type="checkbox" id="__nav_5_8" checked>
      
      <label class="md-nav__link" for="__nav_5_8">
        DAGMan Exercises
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DAGMan Exercises" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_8">
          <span class="md-nav__icon md-icon"></span>
          DAGMan Exercises
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex1-simple-dag/" class="md-nav__link">
        1.1 - A simple DAG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex2-mandelbrot/" class="md-nav__link">
        1.2 - A brief detour through the Mandelbrot set
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex3-complex-dag/" class="md-nav__link">
        1.3 - A more complex DAG
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          1.4 - Handling jobs that fail with DAGMan
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        1.4 - Handling jobs that fail with DAGMan
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-things" class="md-nav__link">
    Breaking Things
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-challenge" class="md-nav__link">
    Bonus Challenge
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../part1-ex5-challenges/" class="md-nav__link">
        1.5  - Workflow Challenges
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_9" type="checkbox" id="__nav_5_9" >
      
      <label class="md-nav__link" for="__nav_5_9">
        Self-checkpointing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Self-checkpointing" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          Self-checkpointing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../checkpoint/part1-ex1-checkpointing/" class="md-nav__link">
        1.1 - Trying out self-checkpointing
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_10" type="checkbox" id="__nav_5_10" >
      
      <label class="md-nav__link" for="__nav_5_10">
        Special Environments
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Special Environments" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          Special Environments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../special/part1-ex1-gpus/" class="md-nav__link">
        1.1 - GPUs
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#breaking-things" class="md-nav__link">
    Breaking Things
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bonus-challenge" class="md-nav__link">
    Bonus Challenge
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="workflows-exercise-14-handling-a-dag-that-fails">Workflows Exercise 1.4: Handling a DAG That Fails<a class="headerlink" href="#workflows-exercise-14-handling-a-dag-that-fails" title="Permanent link">&para;</a></h1>
<p>The objective of this exercise is to help you learn how DAGMan deals with job failures. DAGMan is built to help you recover from such failures.</p>
<h2 id="background">Background<a class="headerlink" href="#background" title="Permanent link">&para;</a></h2>
<p>DAGMan can handle a situation where some of the nodes in a DAG fail. DAGMan will run as many nodes as possible, then create a rescue DAG making it easy to continue when the problem is fixed.</p>
<h2 id="breaking-things">Breaking Things<a class="headerlink" href="#breaking-things" title="Permanent link">&para;</a></h2>
<p>Recall that DAGMan decides that a jobs fails if its exit code is non-zero. Let's modify our montage job so that it fails. Work in the same directory where you did the last DAG. Edit montage.sub to add a <code>-h</code> to the arguments. It will look like this, with the -h at the beginning of the highlighted line:</p>
<div class="codehilite"><pre><span></span><code>executable              = /usr/bin/montage
<span class="hll">arguments               = -h tile_0_0.ppm tile_0_1.ppm tile_1_0.ppm tile_1_1.ppm -mode Concatenate -tile 2x2 mandle-from-dag.jpg
</span>transfer_input_files    = tile_0_0.ppm,tile_0_1.ppm,tile_1_0.ppm,tile_1_1.ppm
output                  = montage.out
error                   = montage.err
log                     = montage.log
request_memory          = 1GB
request_disk            = 1GB
request_cpus            = 1
queue
</code></pre></div>

<p>Submit the DAG again:</p>
<div class="codehilite"><pre><span></span><code><span class="gp">username@ap40 $ </span>condor_submit_dag goatbrot.dag
<span class="go">-----------------------------------------------------------------------</span>
<span class="go">File for submitting this DAG to Condor           : goatbrot.dag.condor.sub</span>
<span class="go">Log of DAGMan debugging messages                 : goatbrot.dag.dagman.out</span>
<span class="go">Log of Condor library output                     : goatbrot.dag.lib.out</span>
<span class="go">Log of Condor library error messages             : goatbrot.dag.lib.err</span>
<span class="go">Log of the life of condor_dagman itself          : goatbrot.dag.dagman.log</span>

<span class="go">Submitting job(s).</span>
<span class="go">1 job(s) submitted to cluster 77.</span>
<span class="go">-----------------------------------------------------------------------</span>
</code></pre></div>

<p>Use watch to watch the jobs until they finish. In a separate window, use <code>tail --lines=500 -f goatbrot.dag.dagman.out</code> to watch what DAGMan does.</p>
<div class="codehilite"><pre><span></span><code><span class="go">06/22/24 17:57:41 Setting maximum accepts per cycle 8.</span>
<span class="go">06/22/24 17:57:41 ******************************************************</span>
<span class="go">06/22/24 17:57:41 ** condor_scheduniv_exec.77.0 (CONDOR_DAGMAN) STARTING UP</span>
<span class="go">06/22/24 17:57:41 ** /usr/bin/condor_dagman</span>
<span class="go">06/22/24 17:57:41 ** SubsystemInfo: name=DAGMAN type=DAGMAN(10) class=DAEMON(1)</span>
<span class="go">06/22/24 17:57:41 ** Configuration: subsystem:DAGMAN local:&lt;NONE&gt; class:DAEMON</span>
<span class="go">06/22/24 17:57:41 ** $CondorVersion: 23.9.0 2024-07-02 BuildID: 742617 PackageID: 23.9.0-0.742617 GitSHA: 5acb07ea RC $</span>
<span class="go">06/22/24 17:57:41 ** $CondorPlatform: x86_64_AlmaLinux9 $</span>
<span class="go">06/22/24 17:57:41 ** PID = 26867</span>
<span class="go">06/22/24 17:57:41 ** Log last touched time unavailable (No such file or directory)</span>
<span class="go">06/22/24 17:57:41 ******************************************************</span>
<span class="go">06/22/24 17:57:41 Using config source: /etc/condor/condor_config</span>
<span class="go">06/22/24 17:57:41 Using local config sources: </span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/00-chtc-global.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/01-chtc-submit.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/02-chtc-flocking.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/03-chtc-jobrouter.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/04-chtc-blacklist.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/99-osg-ss-group.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/config.d/99-roy-extras.conf</span>
<span class="go">06/22/24 17:57:41    /etc/condor/condor_config.local</span>
</code></pre></div>

<p>Below is where DAGMan realizes that the montage node failed:</p>
<div class="codehilite"><pre><span></span><code><span class="go">06/22/24 18:08:42 Event: ULOG_EXECUTE for Condor Node montage (82.0.0)</span>
<span class="go">06/22/24 18:08:42 Number of idle job procs: 0</span>
<span class="go">06/22/24 18:08:42 Event: ULOG_IMAGE_SIZE for Condor Node montage (82.0.0)</span>
<span class="go">06/22/24 18:08:42 Event: ULOG_JOB_TERMINATED for Condor Node montage (82.0.0)</span>
<span class="go">06/22/24 18:08:42 Node montage job proc (82.0.0) failed with status 1.</span>
<span class="go">06/22/24 18:08:42 Number of idle job procs: 0</span>
<span class="go">06/22/24 18:08:42 Of 5 nodes total:</span>
<span class="go">06/22/24 18:08:42  Done     Pre   Queued    Post   Ready   Un-Ready   Failed</span>
<span class="go">06/22/24 18:08:42   ===     ===      ===     ===     ===        ===      ===</span>
<span class="go">06/22/24 18:08:42     4       0        0       0       0          0        1</span>
<span class="go">06/22/24 18:08:42 0 job proc(s) currently held</span>
<span class="go">06/22/24 18:08:42 Aborting DAG...</span>
<span class="go">06/22/24 18:08:42 Writing Rescue DAG to goatbrot.dag.rescue001...</span>
<span class="go">06/22/24 18:08:42 Note: 0 total job deferrals because of -MaxJobs limit (0)</span>
<span class="go">06/22/24 18:08:42 Note: 0 total job deferrals because of -MaxIdle limit (0)</span>
<span class="go">06/22/24 18:08:42 Note: 0 total job deferrals because of node category throttles</span>
<span class="go">06/22/24 18:08:42 Note: 0 total PRE script deferrals because of -MaxPre limit (0)</span>
<span class="go">06/22/24 18:08:42 Note: 0 total POST script deferrals because of -MaxPost limit (0)</span>
<span class="go">06/22/24 18:08:42 **** condor_scheduniv_exec.77.0 (condor_DAGMAN) pid 26867 EXITING WITH STATUS 1</span>
</code></pre></div>

<p>DAGMan notices that one of the jobs failed because its exit code was non-zero. DAGMan ran as much of the DAG as possible and logged enough information to continue the run when the situation is resolved. Do you see the part where it wrote the rescue DAG?</p>
<p>Look at the rescue DAG file. It's called a partial DAG because it indicates what part of the DAG has already been completed.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">username@ap40 $ </span>cat goatbrot.dag.rescue001
<span class="gp"># </span>Rescue DAG file, created after running
<span class="gp">#   </span>the goatbrot.dag DAG file
<span class="gp"># </span>Created <span class="m">6</span>/22/2024 <span class="m">23</span>:08:42 UTC
<span class="gp"># </span>Rescue DAG version: <span class="m">2</span>.0.1 <span class="o">(</span>partial<span class="o">)</span>
<span class="gp">#</span>
<span class="gp"># </span>Total number of Nodes: <span class="m">5</span>
<span class="gp"># </span>Nodes premarked DONE: <span class="m">4</span>
<span class="gp"># </span>Nodes that failed: <span class="m">1</span>
<span class="gp">#   </span>montage,&lt;ENDLIST&gt;

<span class="go">DONE g1</span>
<span class="go">DONE g2</span>
<span class="go">DONE g3</span>
<span class="go">DONE g4</span>
</code></pre></div>

<p>From the comment near the top, we know that the montage node failed. Let's fix it by getting rid of the offending <code>-h</code> argument. Change montage.sub to look like:</p>
<div class="codehilite"><pre><span></span><code>executable              = /usr/bin/montage
arguments               = tile_0_0.ppm tile_0_1.ppm tile_1_0.ppm tile_1_1.ppm -mode Concatenate -tile 2x2 mandle-from-dag.jpg
transfer_input_files    = tile_0_0.ppm,tile_0_1.ppm,tile_1_0.ppm,tile_1_1.ppm
output                  = montage.out
error                   = montage.err
log                     = montage.log
request_memory          = 1GB
request_disk            = 1GB
request_cpus            = 1
queue
</code></pre></div>

<p>Now we can re-submit our original DAG and DAGMan will pick up where it left off. It will automatically notice the rescue DAG. If you didn't fix the problem, DAGMan would generate another rescue DAG.</p>
<div class="codehilite"><pre><span></span><code><span class="gp">username@ap40 $ </span>condor_submit_dag goatbrot.dag
<span class="go">Running rescue DAG 1</span>
<span class="go">-----------------------------------------------------------------------</span>
<span class="go">File for submitting this DAG to Condor           : goatbrot.dag.condor.sub</span>
<span class="go">Log of DAGMan debugging messages                 : goatbrot.dag.dagman.out</span>
<span class="go">Log of Condor library output                     : goatbrot.dag.lib.out</span>
<span class="go">Log of Condor library error messages             : goatbrot.dag.lib.err</span>
<span class="go">Log of the life of condor_dagman itself          : goatbrot.dag.dagman.log</span>

<span class="go">Submitting job(s).</span>
<span class="go">1 job(s) submitted to cluster 83.</span>
<span class="go">-----------------------------------------------------------------------</span>

<span class="gp">username@ap40 $ </span>tail -f goatbrot.dag.dagman.out
<span class="go">06/23/24 11:30:53 ******************************************************</span>
<span class="go">06/23/24 11:30:53 ** condor_scheduniv_exec.83.0 (CONDOR_DAGMAN) STARTING UP</span>
<span class="go">06/23/24 11:30:53 ** /usr/bin/condor_dagman</span>
<span class="go">06/23/24 11:30:53 ** SubsystemInfo: name=DAGMAN type=DAGMAN(10) class=DAEMON(1)</span>
<span class="go">06/23/24 11:30:53 ** Configuration: subsystem:DAGMAN local:&lt;NONE&gt; class:DAEMON</span>
<span class="go">06/23/24 11:30:53 ** $CondorVersion: 23.9.0 2024-07-02 BuildID: 742617 PackageID: 23.9.0-0.742617 GitSHA: 5acb07ea RC $</span>
<span class="go">06/23/24 11:30:53 ** $CondorPlatform: x86_64_AlmaLinux9 $</span>
<span class="go">06/23/24 11:30:53 ** PID = 28576</span>
<span class="go">06/23/24 11:30:53 ** Log last touched 6/22 18:08:42</span>
<span class="go">06/23/24 11:30:53 ******************************************************</span>
<span class="go">06/23/24 11:30:53 Using config source: /etc/condor/condor_config</span>
<span class="go">...</span>
</code></pre></div>

<p><span style="color:RED"><strong>Here is where DAGMAN notices that there is a rescue DAG</strong></span></p>
<div class="codehilite"><pre><span></span><code>06/23/24 11:30:53 Parsing 1 dagfiles
06/23/24 11:30:53 Parsing goatbrot.dag ...
<span class="hll">06/23/24 11:30:53 Found rescue DAG number 1; running goatbrot.dag.rescue001 in combination with normal DAG file
</span>06/23/24 11:30:53 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
06/23/24 11:30:53 USING RESCUE DAG goatbrot.dag.rescue001
06/23/24 11:30:53 Dag contains 5 total jobs
</code></pre></div>

<p><span style="color:RED"><strong>Shortly thereafter it sees that four jobs have already finished.</strong></span></p>
<div class="codehilite"><pre><span></span><code><span class="go">06/23/24 11:31:05 Bootstrapping...</span>
<span class="go">06/23/24 11:31:05 Number of pre-completed nodes: 4</span>
<span class="go">06/23/24 11:31:05 Registering condor_event_timer...</span>
<span class="go">06/23/24 11:31:06 Sleeping for one second for log file consistency</span>
<span class="go">06/23/24 11:31:07 MultiLogFiles: truncating log file /home/roy/condor/goatbrot/montage.log</span>
</code></pre></div>

<p><span style="color:RED"><strong>Here is where DAGMan resubmits the montage job and waits for it to complete.</strong></span></p>
<div class="codehilite"><pre><span></span><code><span class="go">06/23/24 11:31:07 Submitting Condor Node montage job(s)...</span>
<span class="go">06/23/24 11:31:07 submitting: condor_submit </span>
<span class="go">      -a dag_node_name&#39; &#39;=&#39; &#39;montage </span>
<span class="go">      -a +DAGManJobId&#39; &#39;=&#39; &#39;83 </span>
<span class="go">      -a DAGManJobId&#39; &#39;=&#39; &#39;83 </span>
<span class="go">      -a submit_event_notes&#39; &#39;=&#39; &#39;DAG&#39; &#39;Node:&#39; &#39;montage </span>
<span class="go">      -a DAG_STATUS&#39; &#39;=&#39; &#39;0 </span>
<span class="go">      -a FAILED_COUNT&#39; &#39;=&#39; &#39;0 </span>
<span class="go">      -a +DAGParentNodeNames&#39; &#39;=&#39; &#39;&quot;g1,g2,g3,g4&quot; </span>
<span class="go">      montage.sub</span>
<span class="go">06/23/24 11:31:07 From submit: Submitting job(s).</span>
<span class="go">06/23/24 11:31:07 From submit: 1 job(s) submitted to cluster 84.</span>
<span class="go">06/23/24 11:31:07   assigned Condor ID (84.0.0)</span>
<span class="go">06/23/24 11:31:07 Just submitted 1 job this cycle...</span>
<span class="go">06/23/24 11:31:07 Currently monitoring 1 Condor log file(s)</span>
<span class="go">06/23/24 11:31:07 Event: ULOG_SUBMIT for Condor Node montage (84.0.0)</span>
<span class="go">06/23/24 11:31:07 Number of idle job procs: 1</span>
<span class="go">06/23/24 11:31:07 Of 5 nodes total:</span>
<span class="go">06/23/24 11:31:07  Done     Pre   Queued    Post   Ready   Un-Ready   Failed</span>
<span class="go">06/23/24 11:31:07   ===     ===      ===     ===     ===        ===      ===</span>
<span class="go">06/23/24 11:31:07     4       0        1       0       0          0        0</span>
<span class="go">06/23/24 11:31:07 0 job proc(s) currently held</span>
<span class="go">06/23/24 11:40:22 Currently monitoring 1 Condor log file(s)</span>
<span class="go">06/23/24 11:40:22 Event: ULOG_EXECUTE for Condor Node montage (84.0.0)</span>
<span class="go">06/23/24 11:40:22 Number of idle job procs: 0</span>
<span class="go">06/23/24 11:40:22 Event: ULOG_IMAGE_SIZE for Condor Node montage (84.0.0)</span>
<span class="go">06/23/24 11:40:22 Event: ULOG_JOB_TERMINATED for Condor Node montage (84.0.0)</span>
</code></pre></div>

<p><span style="color:RED"><strong>This is where the montage finished.</strong></span></p>
<div class="codehilite"><pre><span></span><code><span class="go">06/23/24 11:40:22 Node montage job proc (84.0.0) completed successfully.</span>
<span class="go">06/23/24 11:40:22 Node montage job completed</span>
<span class="go">06/23/24 11:40:22 Number of idle job procs: 0</span>
<span class="go">06/23/24 11:40:22 Of 5 nodes total:</span>
<span class="go">06/23/24 11:40:22  Done     Pre   Queued    Post   Ready   Un-Ready   Failed</span>
<span class="go">06/23/24 11:40:22   ===     ===      ===     ===     ===        ===      ===</span>
<span class="go">06/23/24 11:40:22     5       0        0       0       0          0        0</span>
<span class="go">06/23/24 11:40:22 0 job proc(s) currently held</span>
</code></pre></div>

<p><span style="color:RED"><strong>And here DAGMan decides that the work is all done.</strong></span></p>
<div class="codehilite"><pre><span></span><code><span class="go">06/23/24 11:40:22 All jobs Completed!</span>
<span class="go">06/23/24 11:40:22 Note: 0 total job deferrals because of -MaxJobs limit (0)</span>
<span class="go">06/23/24 11:40:22 Note: 0 total job deferrals because of -MaxIdle limit (0)</span>
<span class="go">06/23/24 11:40:22 Note: 0 total job deferrals because of node category throttles</span>
<span class="go">06/23/24 11:40:22 Note: 0 total PRE script deferrals because of -MaxPre limit (0)</span>
<span class="go">06/23/24 11:40:22 Note: 0 total POST script deferrals because of -MaxPost limit (0)</span>
<span class="go">06/23/24 11:40:22 **** condor_scheduniv_exec.83.0 (condor_DAGMAN) pid 28576 EXITING WITH STATUS 0</span>
</code></pre></div>

<p>Success! Now go ahead and clean up.</p>
<h2 id="bonus-challenge">Bonus Challenge<a class="headerlink" href="#bonus-challenge" title="Permanent link">&para;</a></h2>
<p>If you have time, add an extra node to the DAG. Copy our original "simple" program, but make it exit with a 1 instead of a 0. DAGMan would consider this a failure, but you'll tell DAGMan that it's really a success. This is reasonable--many real world programs use a variety of return codes, and you might need to help DAGMan distinguish success from failure.</p>
<p>Write a POST script that checks the return value. Check <a href="https://htcondor.readthedocs.io/en/latest/automated-workflows/dagman-scripts.html#pre-and-post-scripts">the HTCondor manual</a> to see how to describe your post script.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../part1-ex3-complex-dag/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              1.3 - A more complex DAG
            </div>
          </div>
        </a>
      
      
        <a href="../part1-ex5-challenges/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              1.5  - Workflow Challenges
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
      <a href="https://twitter.com/OSGSchool" target="_blank" rel="noopener" title="OSG School on Twitter" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d892486b.min.js"></script>
      
    
  </body>
</html>